{"openapi":"3.0.0","paths":{"/script/{id}/revisions":{"get":{"operationId":"ScriptsController_revisionList","summary":"","description":"Get a list of revisions (bundle not included).","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponseDto"},{"properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/RevisionDataDto"}}}}]}}}}},"tags":["scripts"]},"patch":{"operationId":"ScriptsController_setRevision","summary":"","description":"Set the current active revision for a script.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"revisionId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewRevisionResponseDto"}}}}},"tags":["scripts"]},"put":{"operationId":"ScriptsController_createRevision","summary":"","description":"Create a new revision.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRevisionDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevisionDataDto"}}}}},"tags":["scripts"]}},"/script/{id}":{"get":{"operationId":"ScriptsController_getScript","summary":"","description":"Get a script by ID.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScriptDto"}}}}},"tags":["scripts"]},"delete":{"operationId":"ScriptsController_deleteScript","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["scripts"]}},"/project/{project}/scripts":{"get":{"operationId":"ProjectScriptController_listScripts","summary":"","description":"Get a paginated list of scripts.","parameters":[{"name":"project","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponseDto"},{"properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/ScriptDto"}}}}]}}}}},"tags":["scripts"]},"post":{"operationId":"ProjectScriptController_createScript","parameters":[{"name":"project","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateScriptDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScriptDto"}}}}},"tags":["scripts"]}},"/revisions/{id}":{"get":{"operationId":"RevisionsController_getRevision","summary":"","description":"Get a revision by ID.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"withBundle","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevisionFullDto"}}}}},"tags":["revisions"]},"delete":{"operationId":"RevisionsController_deleteRevision","summary":"","description":"Delete a revision by ID.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewRevisionResponseDto"}}}}},"tags":["revisions"]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"","description":"Login with username/password and recieve an authentication token.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthTokenDto"}}}}},"tags":["auth"]}},"/users":{"post":{"operationId":"UsersController_createUser","summary":"","description":"Create a new user using standard username/password sign up.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}}}},"tags":["users"]}},"/project/{project}/acl/@me":{"get":{"operationId":"AclController_getAclMe","summary":"","description":"Get ACL list for the current authorized user.\nThis doesn't require the `PERMISSIONS_READ` permission.","parameters":[{"name":"project","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AclListDto"}}}}},"tags":["acl"]}},"/project/{project}/acl/{user}":{"get":{"operationId":"AclController_getAclSingle","summary":"","description":"Get ACL list for a single user.","parameters":[{"name":"project","required":true,"in":"path","schema":{"type":"string"}},{"name":"user","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AclListDto"}}}}},"tags":["acl"]},"put":{"operationId":"AclController_putAcl","summary":"","description":"Set ACL access for the project for the user.\nThis will implicitly add the user to the project.\nIf `permissions` is empty then the user will be removed from the project.","parameters":[{"name":"user","required":true,"in":"path","schema":{"type":"string"}},{"name":"project","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AclListDto"}}}}},"tags":["acl"]}},"/project/{project}/acl":{"get":{"operationId":"AclController_getAcl","summary":"","description":"Get ACL list for all users.","parameters":[{"name":"project","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/AclListDto"}}}}}},"tags":["acl"]}},"/acl/permissions":{"get":{"operationId":"AclInfoController_getPermissions","summary":"","description":"Get a list of all permissions.","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"type":"string"}}}}}},"tags":["acl"]}},"/project":{"post":{"operationId":"ProjectController_createProject","summary":"","description":"Create a project and return the data.","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProjectDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectDto"}}}}},"tags":["project"]}},"/project/{project}":{"get":{"operationId":"ProjectController_get","summary":"","description":"Get a project by its ID.","parameters":[{"name":"project","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectDto"}}}}},"tags":["project"]}}},"info":{"title":"Actias API","description":"Public facing API for Actias workers.","version":"1.0","contact":{}},"tags":[{"name":"scripts","description":"revisions"}],"servers":[],"components":{"schemas":{"PaginatedResponseDto":{"type":"object","properties":{"page":{"type":"number","description":"Current page."},"lastPage":{"type":"number","description":"Last possible page."}},"required":["page","lastPage"]},"ProjectConfigDto":{"type":"object","properties":{"id":{"type":"string"},"entryPoint":{"type":"string"},"includes":{"type":"array","items":{"type":"string"}}},"required":["id","entryPoint","includes"]},"RevisionDataDto":{"type":"object","properties":{"id":{"type":"string"},"created":{"format":"date-time","type":"string","description":"Date that revision was published."},"scriptId":{"type":"string","description":"ID of the script this revision is attached to."},"projectConfig":{"description":"Config that the project was uploaded with.\nThis is metadata and is mostly included for CLI to restore revisions intact.","allOf":[{"$ref":"#/components/schemas/ProjectConfigDto"}]}},"required":["id","created","scriptId","projectConfig"]},"NewRevisionResponseDto":{"type":"object","properties":{"scriptId":{"type":"string"},"revisionId":{"type":"string","description":"New revision ID.\nThis may be null."}},"required":["scriptId"]},"FileDto":{"type":"object","properties":{"revisionId":{"type":"string","description":"ID of the revision this file resides in.\nThis is empty when creating a revision or uploading a bundle."},"fileName":{"type":"string","description":"Name of the file"},"filePath":{"type":"string","description":"Path of file relative from the root path"},"content":{"type":"string","description":"Content of the file, base64 encoded"}},"required":["fileName","filePath","content"]},"BundleDto":{"type":"object","properties":{"entryPoint":{"type":"string","description":"Path of the entrypoint file.\nThis is the first file which is executed by the runtime."},"files":{"description":"All files within the bundle.","type":"array","items":{"$ref":"#/components/schemas/FileDto"}}},"required":["entryPoint","files"]},"CreateRevisionDto":{"type":"object","properties":{"bundle":{"description":"The bundle which will be used.","allOf":[{"$ref":"#/components/schemas/BundleDto"}]},"projectConfig":{"type":"object","description":"A valid project configuration."}},"required":["bundle","projectConfig"]},"ScriptDto":{"type":"object","properties":{"id":{"type":"string"},"publicIdentifier":{"type":"string","description":"Public identifier of the script.\nThis must be globally unique"},"lastUpdated":{"format":"date-time","type":"string","description":"Date that the script (or revisions) were last updated."},"currentRevisionId":{"type":"string","description":"ID of the currently deployed revision.\nThis is empty for newly created scripts."}},"required":["id","publicIdentifier","lastUpdated"]},"CreateScriptDto":{"type":"object","properties":{"publicIdentifier":{"type":"string","description":"Public identifier of the script.\nThis will be the globally unique identifier of your script."}},"required":["publicIdentifier"]},"RevisionFullDto":{"type":"object","properties":{"id":{"type":"string"},"created":{"format":"date-time","type":"string","description":"Date that revision was published."},"scriptId":{"type":"string","description":"ID of the script this revision is attached to."},"projectConfig":{"description":"Config that the project was uploaded with.\nThis is metadata and is mostly included for CLI to restore revisions intact.","allOf":[{"$ref":"#/components/schemas/ProjectConfigDto"}]},"bundle":{"description":"Content bundle of all files.\nThis is only present in some responses.","allOf":[{"$ref":"#/components/schemas/BundleDto"}]}},"required":["id","created","scriptId","projectConfig"]},"LoginDto":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}},"required":["username","password"]},"AuthTokenDto":{"type":"object","properties":{"token":{"type":"string"}},"required":["token"]},"CreateUserDto":{"type":"object","properties":{"username":{"type":"string","description":"Username, must be unique.","minLength":6,"maxLength":36},"email":{"type":"string"},"password":{"type":"string","description":"Password between 8 and 64 characters.","minLength":8,"maxLength":64}},"required":["username","email","password"]},"UserDto":{"type":"object","properties":{"id":{"type":"string","description":"Users ID."},"created":{"format":"date-time","type":"string","description":"When the user was created."},"admin":{"type":"boolean","description":"If the user is a systm admin."},"email":{"type":"string","description":"Users email."},"username":{"type":"string","description":"Users username."}},"required":["id","created","admin","email","username"]},"AclListDto":{"type":"object","properties":{"userId":{"type":"string","description":"User id that the permissions apply to."},"permissions":{"type":"object","description":"List of permissions"}},"required":["userId","permissions"]},"CreateProjectDto":{"type":"object","properties":{"name":{"type":"string","description":"Name of project.","minLength":6,"maxLength":36}},"required":["name"]},"ProjectDto":{"type":"object","properties":{"id":{"type":"string"},"name":{"type":"string","description":"Name of project."},"ownerId":{"type":"string","description":"Owner of project, has full access."},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"}},"required":["id","name","ownerId","createdAt","updatedAt"]}}}}