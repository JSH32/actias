{"openapi":"3.0.0","paths":{"/scripts/{id}/revisions":{"get":{"operationId":"ScriptsController_revisionList","summary":"","description":"Get a list of revisions (bundle not included).","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"page","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponseDto"},{"properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/RevisionDataDto"}}}}]}}}}},"tags":["scripts"]},"patch":{"operationId":"ScriptsController_setRevision","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"revisionId","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewRevisionResponseDto"}}}}},"tags":["scripts"]},"put":{"operationId":"ScriptsController_createRevision","summary":"","description":"Create a new revision.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRevisionDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevisionDataDto"}}}}},"tags":["scripts"]}},"/scripts/list":{"get":{"operationId":"ScriptsController_listScripts","summary":"","description":"Get a paginated list of scripts.","parameters":[{"name":"page","required":true,"in":"query","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponseDto"},{"properties":{"items":{"type":"array","items":{"$ref":"#/components/schemas/ScriptDto"}}}}]}}}}},"tags":["scripts"]}},"/scripts/{id}":{"get":{"operationId":"ScriptsController_getScript","summary":"","description":"Get a script by ID.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScriptDto"}}}}},"tags":["scripts"]},"delete":{"operationId":"ScriptsController_deleteScript","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["scripts"]}},"/scripts":{"post":{"operationId":"ScriptsController_createScript","summary":"","description":"","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateScriptDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ScriptDto"}}}}},"tags":["scripts"]}},"/revisions/{id}":{"get":{"operationId":"RevisionsController_getRevision","summary":"","description":"Get a revision by ID.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}},{"name":"withBundle","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RevisionFullDto"}}}}},"tags":["revisions"]},"delete":{"operationId":"RevisionsController_deleteRevision","summary":"","description":"Delete a revision by ID.","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewRevisionResponseDto"}}}}},"tags":["revisions"]}}},"info":{"title":"Ephermal API","description":"Public facing API for ephermal.","version":"1.0","contact":{}},"tags":[{"name":"scripts","description":"revisions"}],"servers":[],"components":{"schemas":{"PaginatedResponseDto":{"type":"object","properties":{"page":{"type":"number","description":"Current page."},"totalPages":{"type":"number","description":"How many pages exist."}},"required":["page","totalPages"]},"ProjectConfigDto":{"type":"object","properties":{"id":{"type":"string"},"entryPoint":{"type":"string"},"includes":{"type":"array","items":{"type":"string"}}},"required":["id","entryPoint","includes"]},"RevisionDataDto":{"type":"object","properties":{"id":{"type":"string"},"created":{"format":"date-time","type":"string","description":"Date that revision was published."},"scriptId":{"type":"string","description":"ID of the script this revision is attached to."},"projectConfig":{"description":"Config that the project was uploaded with.\nThis is metadata and is mostly included for CLI to restore revisions intact.","allOf":[{"$ref":"#/components/schemas/ProjectConfigDto"}]}},"required":["id","created","scriptId","projectConfig"]},"NewRevisionResponseDto":{"type":"object","properties":{"scriptId":{"type":"string"},"revisionId":{"type":"string","description":"New revision ID.\nThis may be null."}},"required":["scriptId"]},"FileDto":{"type":"object","properties":{"revisionId":{"type":"string","description":"ID of the revision this file resides in.\nThis is empty when creating a revision or uploading a bundle."},"fileName":{"type":"string","description":"Name of the file"},"filePath":{"type":"string","description":"Path of file relative from the root path"},"content":{"type":"string","description":"Content of the file, base64 encoded"}},"required":["fileName","filePath","content"]},"BundleDto":{"type":"object","properties":{"entryPoint":{"type":"string","description":"Path of the entrypoint file.\nThis is the first file which is executed by the runtime."},"files":{"description":"All files within the bundle.","type":"array","items":{"$ref":"#/components/schemas/FileDto"}}},"required":["entryPoint","files"]},"CreateRevisionDto":{"type":"object","properties":{"bundle":{"description":"The bundle which will be used.","allOf":[{"$ref":"#/components/schemas/BundleDto"}]},"projectConfig":{"type":"object","description":"A valid project configuration."}},"required":["bundle","projectConfig"]},"ScriptDto":{"type":"object","properties":{"id":{"type":"string"},"publicIdentifier":{"type":"string","description":"Public identifier of the script.\nThis must be globally unique"},"lastUpdated":{"format":"date-time","type":"string","description":"Date that the script (or revisions) were last updated."},"currentRevisionId":{"type":"string","description":"ID of the currently deployed revision.\nThis is empty for newly created scripts."}},"required":["id","publicIdentifier","lastUpdated"]},"CreateScriptDto":{"type":"object","properties":{"publicIdentifier":{"type":"string","description":"Public identifier of the script.\nThis will be the globally unique identifier of your script."}},"required":["publicIdentifier"]},"RevisionFullDto":{"type":"object","properties":{"id":{"type":"string"},"created":{"format":"date-time","type":"string","description":"Date that revision was published."},"scriptId":{"type":"string","description":"ID of the script this revision is attached to."},"projectConfig":{"description":"Config that the project was uploaded with.\nThis is metadata and is mostly included for CLI to restore revisions intact.","allOf":[{"$ref":"#/components/schemas/ProjectConfigDto"}]},"bundle":{"description":"Content bundle of all files.\nThis is only present in some responses.","allOf":[{"$ref":"#/components/schemas/BundleDto"}]}},"required":["id","created","scriptId","projectConfig"]}}}}